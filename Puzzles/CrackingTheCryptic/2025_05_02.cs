
namespace Puzzles.CrackingTheCryptic;

public sealed class _2025_05_02 : CtcPuzzle
{
    public override string Title => "Arrows v.s. Thermo";
    public override string? Author => "Aad van de Wetering";
    public override Uri? Url => new("https://youtu.be/kjKeq8fTyS8");

    public override Clues Clues { get; } = Clues.Parse("""
        ...|...|...
        .1.|...|...
        ...|2..|...
        ---+---+---
        ...|...|...
        ...|...|...
        ...|...|...
        ---+---+---
        ...|...|...
        ...|...|..4
        ...|...|...
        """);

    public override ImmutableArray<Constraint> Constraints { get; } =
    [
        .. Rules.Standard,
        .. ArrowsHi(),
        .. ArrowsLo(),
        .. Thermos(),
    ];

    public override Cells Solution { get; } = Cells.Parse("""
        482|956|371
        619|473|825
        735|281|946
        ---+---+---
        846|392|517
        127|845|693
        593|617|482
        ---+---+---
        374|529|168
        961|738|254
        258|164|739
        """);

    private static IEnumerable<Arrow> ArrowsHi() =>
    [
        Arrow.Parse("""
            .1.|...|...
            .2.|...|...
            .3.|...|...
            ---+---+---
            .4.|...|...
            ...|...|...
            ...|...|...
            ---+---+---
            ...|...|...
            ...|...|...
            ...|...|...
            """),
        Arrow.Parse("""
            ...|1..|...
            ...|2..|...
            ...|3..|...
            ---+---+---
            ...|4..|...
            ...|...|...
            ...|...|...
            ---+---+---
            ...|...|...
            ...|...|...
            ...|...|...
            """),
        Arrow.Parse("""
            ...|..1|...
            ...|..2|...
            ...|..3|...
            ---+---+---
            ...|..4|...
            ...|...|...
            ...|...|...
            ---+---+---
            ...|...|...
            ...|...|...
            ...|...|...
            """),
        Arrow.Parse("""
            ...|...|.1.
            ...|...|.2.
            ...|...|.3.
            ---+---+---
            ...|...|.4.
            ...|...|...
            ...|...|...
            ---+---+---
            ...|...|...
            ...|...|...
            ...|...|...
            """),
    ];
    private static IEnumerable<Arrow> ArrowsLo() =>
    [
        Arrow.Parse("""
            ...|...|...
            ...|...|...
            ...|...|...
            ---+---+---
            ...|...|...
            ...|...|...
            ..4|...|...
            ---+---+---
            ..3|...|...
            ..2|...|...
            ..1|...|...
            """),
        Arrow.Parse("""
            ...|...|...
            ...|...|...
            ...|...|...
            ---+---+---
            ...|...|...
            ...|...|...
            ...|.4.|...
            ---+---+---
            ...|.3.|...
            ...|.2.|...
            ...|.1.|...
            """),
        Arrow.Parse("""
            ...|...|...
            ...|...|...
            ...|...|...
            ---+---+---
            ...|...|...
            ...|...|...
            ...|...|4..
            ---+---+---
            ...|...|3..
            ...|...|2..
            ...|...|1..
            """),
    ];

    private static IEnumerable<Thermometer> Thermos() =>
    [
        Thermometer.Parse("""
            1..|...|...
            2..|...|...
            3..|...|...
            ---+---+---
            4..|...|...
            ...|...|...
            ...|...|...
            ---+---+---
            ...|...|...
            ...|...|...
            ...|...|...
            """),
        Thermometer.Parse("""
            ...|.1.|...
            ...|.2.|...
            ...|.3.|...
            ---+---+---
            ...|.4.|...
            ...|...|...
            ...|...|...
            ---+---+---
            ...|...|...
            ...|...|...
            ...|...|...
            """),
        Thermometer.Parse("""
            ...|...|..1
            ...|...|..2
            ...|...|..3
            ---+---+---
            ...|...|..4
            ...|...|...
            ...|...|...
            ---+---+---
            ...|...|...
            ...|...|...
            ...|...|...
            """),
        Thermometer.Parse("""
            ...|...|...
            ...|...|...
            ...|...|...
            ---+---+---
            ...|...|...
            ...|...|...
            .4.|...|...
            ---+---+---
            .3.|...|...
            .2.|...|...
            .1.|...|...
            """),
        Thermometer.Parse("""
            ...|...|...
            ...|...|...
            ...|...|...
            ---+---+---
            ...|...|...
            ...|...|...
            ...|...|.4.
            ---+---+---
            ...|...|.3.
            ...|...|.2.
            ...|...|.1.
            """),
    ];

}

